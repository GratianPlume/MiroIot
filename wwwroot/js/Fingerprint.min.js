var FpService=function(){function n(){var t=this;this.fingerSocket=new WebSocket("ws://localhost:5018/");this.fingerSocket.onerror=this.onerror;this.fingerSocket.onclose=this.onclose;this.fingerSocket.onopen=function(){return t.reset()};this.fingerSocket.onmessage=function(i){var r=JSON.parse(i.data);if(t._merge){console.log("请按重新采集");return}if(n.isCapture(r)){t._captures.push(r);t.onImage(r.index,"data:image/png;base64,"+r.data.image)}else if(n.isMerge(r))if(r.errcode){t.reset();t.onfail(r.errcode)}else t._merge=r,t.onsuccess()}}return Object.defineProperty(n.prototype,"item",{get:function(){return this._merge?{feature:this._merge.data.feature,image:this._captures[0].data.image,width:this._captures[0].data.width,height:this._captures[0].data.height}:undefined},enumerable:!0,configurable:!0}),n.prototype.reset=function(){this.fingerSocket.send(JSON.stringify({command:"reset"}));this._captures=[];this._merge=undefined;this.onreset()},n.prototype.close=function(){this.fingerSocket.close()},n.isCapture=function(n){return n.datatype==="fpcapture"},n.isMerge=function(n){return n.datatype==="fpmerge"},n.create=function(){return new n},n}();